<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Skill Swap | Learn & Teach</title>

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/css/index.css">
</head>
<body>
<!-- decorative layers -->
<div class="corner-veil" aria-hidden="true"></div>

<div class="particles" aria-hidden="true">
    <span></span><span></span><span></span><span></span><span></span><span></span>
</div>

<!-- moving-words (JS-driven) -->
<div id="movingWords" class="moving-words" aria-hidden="true">
    <div class="line" data-speed="30" data-direction="left">
        Learn • Teach • Share • Grow • Connect • Mentor • Discover • Exchange •
    </div>
    <div class="line" data-speed="18" data-direction="right">
        Workshops • Sessions • Hobbies • Projects • Collaborate • Swap •
    </div>
    <div class="line" data-speed="24" data-direction="left">
        Local • Global • Online • Offline • In-person • Remote •
    </div>
    <div class="line" data-speed="20" data-direction="right">
        Innovation • Inspiration • Knowledge • Passion • Ideas • Vision •
    </div>
    <div class="line" data-speed="28" data-direction="left">
        Code • Design • Create • Build • Solve • Improve • Evolve •
    </div>
    <div class="line" data-speed="16" data-direction="right">
        Friendship • Networking • Growth • Exploration • Curiosity •
    </div>
    <div class="line" data-speed="26" data-direction="left">
        Music • Art • Science • Culture • Adventure • Travel • Learn •
    </div>
    <div class="line" data-speed="22" data-direction="right">
        Empower • Inspire • Lead • Dream • Achieve • Succeed • Believe •
    </div>
</div>

    <!-- ==== Side cards  ==== -->
    <div class="side-cards" aria-hidden="true">
        <aside class="side-card side-left">
            <img src="/images/image1.png" alt="">
        </aside>
        <aside class="side-card side-bottom-left">
            <img src="/images/image2.jpeg" alt="">
        </aside>

        <aside class="side-card side-right">
            <img src="/images/image4.jpeg" alt="">
        </aside>
        <aside class="side-card side-bottom-right">
            <img src="/images/image3.jpeg" alt="">
        </aside>
    </div>

<div class="rotator-outside" aria-live="polite" aria-atomic="true">
    <span id="rotating-word">Wanna learn a skill?</span>
</div>

    <main class="content" role="main" aria-label="SkillSwap introduction">
        <header class="hero-head" aria-labelledby="hero-title">
            <h1 id="hero-title">Skill Swap<small>Learn • Teach • Exchange</small></h1>

            <p class="lead">
                Connect with local and global learners. Share your knowledge, discover new hobbies, and grow together.
            </p>

            <nav class="btns" aria-label="Primary actions">
                <a href="/register" class="btn btn-primary">Create account</a>
                <a href="/login" class="btn btn-secondary">Login</a>
            </nav>

            <p class="cta-note">Free to join • Create your profile in under 2 minutes</p>
        </header>

        <div class="steps" aria-hidden="true">
            <div class="step">
                <div class="bullet">1</div>
                <div class="step-body">
                    <p class="step-title">Create a profile</p>
                    <p class="step-sub">Add your skills and availability so others can find you.</p>
                </div>
            </div>
            <div class="step">
                <div class="bullet">2</div>
                <div class="step-body">
                    <p class="step-title">Browse offers</p>
                    <p class="step-sub">Find lessons, workshops, or casual exchanges near you.</p>
                </div>
            </div>
            <div class="step">
                <div class="bullet">3</div>
                <div class="step-body">
                    <p class="step-title">Connect & learn</p>
                    <p class="step-sub">Book sessions, rate experiences, and grow your network.</p>
                </div>
            </div>
        </div>
    </main>

<footer class="site-footer" role="contentinfo">
    <p>© <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2025</span> Skill Swap — Share a skill, change a life</p>
</footer>

<!-- rotating script  -->
<script>
    (function(){
        const words = [
            'Master new skills.',
            'Teach someone in need.',
            'Share your knowledge.',
            'Find a new hobby.',
            'Grow together.',
            'Meet new people.',
            'Learn from others.',
            'Join the community!'
        ];

        const el = document.getElementById('rotating-word');
        if (!el || !words.length) return;

        // pick a random index
        let prev = -1;
        function pickRandomIndex() {
            if (words.length === 1) return 0;
            let i = Math.floor(Math.random() * words.length);
            // avoid immediate repeat
            while (i === prev) {
                i = Math.floor(Math.random() * words.length);
            }
            prev = i;
            return i;
        }

        // random word
        el.textContent = words[pickRandomIndex()];

        function rotateWord(){
            el.classList.add('fade-out');
            setTimeout(() => {
                el.textContent = words[pickRandomIndex()];
                el.classList.remove('fade-out');
            }, 400);
        }

        // rotate
        setInterval(rotateWord, 2500);
    })();
</script>

<!--Moving words script-->
<script>
    (function(){
        // Respect reduced motion early
        const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (reduceMotion) return;

        // Config: get container lines
        const container = document.getElementById('movingWords');
        if (!container) return;

        // For each .line we will create a .track with two copies of the text so it loops seamlessly
        const lines = Array.from(container.querySelectorAll('.line')).map(line => {
            const speed = Number(line.dataset.speed) || 24; // px / sec
            const direction = (line.dataset.direction === 'right') ? 1 : -1; // 1 => move right-to-left visually if -1?
            // Create track
            const track = document.createElement('div');
            track.className = 'track';
            // Source text (trim)
            const text = line.textContent.trim();
            // Create two identical spans to duplicate the content
            const spanA = document.createElement('span');
            spanA.textContent = text;
            const spanB = document.createElement('span');
            spanB.textContent = text;
            // Append
            track.appendChild(spanA);
            track.appendChild(spanB);
            // Clear original line's text and insert track
            line.textContent = '';
            line.appendChild(track);

            return { lineEl: line, trackEl: track, speed, direction, width: 0, offset: 0 };
        });

        // Resize handler: measure track width and ensure track is at least 2*viewport width
        function measure() {
            const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
            lines.forEach(item => {
                // natural width of track (two copies)
                // temporarily reset transform to measure
                item.trackEl.style.transform = 'translateX(0)';
                const natural = item.trackEl.scrollWidth;
                // Ensure track is at least 2 * vw: if not, duplicate content until it is
                if (natural < vw * 2) {
                    // append more copies until wide enough
                    while (item.trackEl.scrollWidth < vw * 2) {
                        const clone = item.trackEl.children[0].cloneNode(true);
                        item.trackEl.appendChild(clone);
                    }
                }
                item.width = item.trackEl.scrollWidth;
                // initialize offset: start such that first copy is visible
                item.offset = 0;
                // apply initial transform
                item.trackEl.style.transform = `translateX(${item.offset}px)`;
            });
        }

        // Animation loop using requestAnimationFrame
        let lastTs = null;
        function tick(ts) {
            if (!lastTs) lastTs = ts;
            const dt = (ts - lastTs) / 1000; // seconds
            lastTs = ts;

            lines.forEach(item => {
                // movement in px = speed * dt * directionSign
                // direction: 'left' (data-direction="left") should visually move text leftwards -> we subtract px
                const delta = item.speed * dt * (item.direction === -1 ? -1 : 1);
                item.offset += delta;

                // normalize offset to keep within [ -item.width/2, 0 ) or similar for smooth loop
                // For simplicity, when moving left (negative delta), if offset <= -item.width/2, add item.width/2
                const half = item.width / 2;
                if (item.direction === -1) {
                    // moving left: offset goes negative; loop when offset <= -half
                    if (item.offset <= -half) item.offset += half;
                } else {
                    // moving right: offset goes positive; loop when offset >= 0
                    if (item.offset >= 0) item.offset -= half;
                }

                // Apply transform (use translate3d for GPU)
                item.trackEl.style.transform = `translate3d(${item.offset}px,0,0)`;
            });

            rafId = requestAnimationFrame(tick);
        }

        // Start/stop visibility handling
        let rafId = null;
        function start() {
            if (rafId) return;
            lastTs = null;
            rafId = requestAnimationFrame(tick);
        }
        function stop() {
            if (!rafId) return;
            cancelAnimationFrame(rafId);
            rafId = null;
        }

        // Visibility change: pause when tab not visible to save CPU
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) stop(); else start();
        });

        // Re-measure on resize and start
        window.addEventListener('resize', () => {
            measure();
        });

        // Initial measure and start
        measure();
        start();

        // expose for debugging (optional)
        window._movingWords = { measure, start, stop, lines };
    })();
</script>

</body>
</html>
